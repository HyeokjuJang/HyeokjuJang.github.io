(this.webpackJsonppibox=this.webpackJsonppibox||[]).push([[0],{101:function(e,t,n){e.exports=n(276)},106:function(e,t,n){},2:function(e,t){e.exports={PREFIX:"00000000-0000-0000-0000-",SERVICE_ID:"FD2B4448-AA0F-4A15-A62F-EB0BE77A0000",SERVICE_NAME:"FD2B4448-AA0F-4A15-A62F-EB0BE77A0001",DEVICE_MODEL:"FD2B4448-AA0F-4A15-A62F-EB0BE77A0002",WIFI_NAME:"FD2B4448-AA0F-4A15-A62F-EB0BE77A0003",IP_ADDRESS:"FD2B4448-AA0F-4A15-A62F-EB0BE77A0004",INPUT:"FD2B4448-AA0F-4A15-A62F-EB0BE77A0005",NOTIFY_MESSAGE:"FD2B4448-AA0F-4A15-A62F-EB0BE77A0006",INPUT_SEP:"FD2B4448-AA0F-4A15-A62F-EB0BE77A0007",CUSTOM_COMMAND_INPUT:"FD2B4448-AA0F-4A15-A62F-EB0BE77A0008",CUSTOM_COMMAND_NOTIFY:"FD2B4448-AA0F-4A15-A62F-EB0BE77A0009",CUSTOM_INFO_LABEL:"FD2BCCCA",CUSTOM_INFO_COUNT:"FD2BCCAA0000",CUSTOM_INFO:"FD2BCCCB",CUSTOM_COMMAND_LABEL:"FD2BCCCC",CUSTOM_COMMAND_COUNT:"FD2BCCAC0000"}},276:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(55),l=n.n(i),c=(n(106),n(61),n(5)),s=n(9),u=n.n(s),o=n(18),p=n(96),m=n(97),d=n(99),f=n(98),h=n(100),E=n(36),v=n.n(E),b=n(13);function g(e){var t=e.ipAddress,n=Object(a.useState)(!1),i=Object(b.a)(n,2),l=i[0],c=i[1],s=Object(a.useState)(""),u=Object(b.a)(s,2),o=u[0],p=u[1];return Object(a.useEffect)((function(){""!==t&&"..."!==t?(c(!0),p(t)):(c(!1),p(""))}),[t]),Object(a.useEffect)((function(){}),[o]),l?r.a.createElement("div",{className:"connect-panel panel"},r.a.createElement("div",{className:"panel-title"},"\ud130\ubbf8\ub110 : http://",o,":4200"),r.a.createElement("iframe",{src:"http://"+o+":4200",title:"\ud130\ubbf8\ub110",width:"100%",height:"600px"})):null}var C=n(56),_=n(57),O=n.n(_),A=n(58),y=n.n(A),I=n(59),P=n.n(I),N=n(60),T=n.n(N);function S(e){var t,n=Object(a.useState)([]),i=Object(b.a)(n,2),l=i[0],s=i[1],u=Object(a.useState)(0),o=Object(b.a)(u,2),p=o[0],m=o[1],d=Object(a.useState)(0),f=Object(b.a)(d,2),h=f[0],E=f[1],v=Object(a.useState)([]),g=Object(b.a)(v,2),_=g[0],A=g[1],I=Object(a.useState)([]),N=Object(b.a)(I,2),S=N[0],w=N[1];Object(a.useEffect)((function(){console.log(_)}),[_]);function x(){var e=document.createElement("a"),t=function(){var e="GPIO.setmode(GPIO.BCM)\npwm = pigpio.pi() \n    ";return 1===p?e+="\npwm.set_mode(18, pigpio.OUTPUT)\n":2===p?e+="\nGPIO.setup(18,GPIO.OUT) # \ucc44\ub110 1 \uc18d\ub3c4\nGPIO.setup(23,GPIO.OUT)\nGPIO.output(23,0) # \ucc44\ub1101 \ubc29\ud5a5\nm1=GPIO.PWM(18,50)\nm1.start(0)\n":3===p&&3!==h&&(e+="\npix1 = neopixel.NeoPixel(board.D18,12)\n"),1===h?e+="\npwm.set_mode(12, pigpio.OUTPUT)\n":2===h?e+="\nGPIO.setup(12,GPIO.OUT) # \ucc44\ub110 2 \uc18d\ub3c4\nGPIO.setup(25,GPIO.OUT)\nGPIO.output(25,0) # \ucc44\ub1102 \ubc29\ud5a5\nm2=GPIO.PWM(12,50)\nm2.start(0)\n":3===h&&3!==p&&(e+="\npix2 = neopixel.NeoPixel(board.D12,12)\n"),e}(),n=function(){var e=0,t="    # \uc5ec\uae30\ubd80\ud130\ub294 \ube14\ub85d\uc73c\ub85c \ub9cc\ub4e0 \ucee4\uc2a4\ud140 \ucf54\ub4dc\uc785\ub2c8\ub2e4.\n    resultIndex = np.argmax(result)\n";return l.forEach((function(n,a){var r="",i=!1,l=!1;0===p?i=!0:1===p?r+="pwm.set_servo_pulsewidth(18,".concat(parseFloat(_[a])/180*2e3+500,") # 500 => 0\ub3c4 / 1500 => 90\ub3c4 / 2500 => 180\ub3c4\n        "):2===p?r+="m1.ChangeDutyCycle(".concat(_[a][1],")\n        GPIO.output(23,").concat(_[a][0],") # \ubc29\ud5a5 \uc81c\uc5b4\n        ").concat(2===h?"":"time.sleep(".concat(_[a][2],")\n        m1.ChangeDutyCycle(0)\n        GPIO.output(23,0)\n        "),"\n        "):3===p?r+="pix1.fill((".concat(_[a].r,",").concat(_[a].g,",").concat(_[a].b,"))\n        pix1.show()\n        "):i=!0,0===h?l=!0:1===h?r+="pwm.set_servo_pulsewidth(12,".concat(parseFloat(S[a])/180*2e3+500,") # 500 => 0\ub3c4 / 1500 => 90\ub3c4 / 2500 => 180\ub3c4\n        "):2===h?r+="m2.ChangeDutyCycle(".concat(S[a][1],")\n        GPIO.output(25,").concat(S[a][0],") # \ubc29\ud5a5 \uc81c\uc5b4\n        time.sleep(").concat(S[a][2],")\n        ").concat(2===p?"m1.ChangeDutyCycle(0)\n        GPIO.output(23,0)":"","\n        m2.ChangeDutyCycle(0)\n        GPIO.output(25,0)\n        "):3===h?r+="pix2.fill((".concat(S[a].r,",").concat(S[a].g,",").concat(S[a].b,"))\n        pix2.show()\n        "):l=!0,!0===i&&!0===l||(0===e?(t+="\n    if ",e=1):t+="\n    elif ",t+="resultIndex == ".concat(a,":\n        ").concat(r,"\n        "))})),t}(),a=function(){var e="\n# Clean up\ncv2.destroyAllWindows()\nvideostream.stop()\n";return 1===p&&(e+="p1.stop()\n"),2===p&&(e+="m1.stop()\n"),1===h&&(e+="p2.stop()\n"),2===h&&(e+="m2.stop()\n"),e+="GPIO.cleanup()\n"}(),r=new Blob(["\n## pibox TFLITE\nimport os\nimport argparse\nimport cv2\nimport numpy as np\nimport sys\nimport time\nfrom threading import Thread\nimport importlib.util\n\n## \ucd9c\ub825\uc744 \uc704\ud55c import\nimport RPi.GPIO as GPIO\nimport pigpio\nimport time\nimport board\nimport neopixel\n\n",t,"\n# \uce74\uba54\ub77c \uc624\ube0c\uc81d\ud2b8\nclass VideoStream:\n    def __init__(self,resolution=(320,240),framerate=3): # \uc6d0\ub798\ub294 640,480 \uadf8\ub9ac\uace0 30 framerate\n        # \ud30c\uc774 \uce74\uba54\ub77c\ub97c \uc2dc\uc791\ud569\ub2c8\ub2e4.\n        self.stream = cv2.VideoCapture(0)\n        ret = self.stream.set(cv2.CAP_PROP_FOURCC, cv2.VideoWriter_fourcc(*'MJPG'))\n        ret = self.stream.set(3,resolution[0])\n        ret = self.stream.set(4,resolution[1])\n            \n        # \uccab\ubc88\uc9f8 \uc0ac\uc9c4\uc744 \ubd88\ub7ec\uc635\ub2c8\ub2e4.\n        (self.grabbed, self.frame) = self.stream.read()\n\n\t    # \uba48\ucd9c \uc218 \uc788\ub3c4\ub85d stopped\ub97c \uc124\uc815\ud574\uc90d\ub2c8\ub2e4.\n        self.stopped = False\n\n    def start(self):\n\t    # \ube44\ub514\uc624 \uc2a4\ud2b8\ub9bc\uc5d0\uc11c \ud504\ub808\uc784\uc744 \uc77d\uc5b4\uc624\ub294 \uc4f0\ub808\ub4dc\ub97c \uc2dc\uc791\ud569\ub2c8\ub2e4.\n        Thread(target=self.update,args=()).start()\n        return self\n\n    def update(self):\n        # \uc4f0\ub808\ub4dc\uac00 \uba48\ucd9c \ub54c \uae4c\uc9c0 \uacc4\uc18d \uc2a4\ud2b8\ub9bc\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4.\n        while True:\n            # \uce74\uba54\ub77c\uac00 \uba48\ucd94\uba74 \uc2a4\ud2b8\ub9bc\uc744 \uba48\ucda5\ub2c8\ub2e4.\n            if self.stopped:\n                # \uce74\uba54\ub77c \ub9ac\uc18c\uc2a4\ub97c \ub2eb\uc2b5\ub2c8\ub2e4.\n                self.stream.release()\n                return\n\n            # \uba48\ucd98\uac83\uc774 \uc544\ub2c8\ub77c\uba74 \ud504\ub808\uc784\uc744 \uac00\uc838\uc635\ub2c8\ub2e4.\n            (self.grabbed, self.frame) = self.stream.read()\n\n    def read(self):\n\t    # \uac00\uc7a5 \ucd5c\uadfc \ud504\ub808\uc784\uc744 \uac00\uc838\uc635\ub2c8\ub2e4.\n        return self.frame\n\n    def stop(self):\n\t    # \uce74\uba54\ub77c \uc4f0\ub808\ub4dc\ub97c \uc815\uc9c0\ud569\ub2c8\ub2e4.\n        self.stopped = True\n\n# \uc785\ub825 \ud30c\ub77c\ubbf8\ud130\ub97c \uc815\uc758\ud569\ub2c8\ub2e4.\nparser = argparse.ArgumentParser()\nparser.add_argument('--modeldir', help='Folder the .tflite file is located in',\n                    required=True)\nparser.add_argument('--graph', help='Name of the .tflite file, if different than model.tflite',\n                    default='model.tflite')\nparser.add_argument('--labels', help='Name of the labelmap file, if different than labels.txt',\n                    default='labels.txt')\nparser.add_argument('--threshold', help='Minimum confidence threshold for displaying detected objects',\n                    default=0.5)\nparser.add_argument('--resolution', help='Desired webcam resolution in WxH. If the webcam does not support the resolution entered, errors may occur.',\n                    default='320x240') # \uc6d0\ub798\ub294 1280x720 \uc18d\ub3c4\ub97c \uc704\ud574 \ub0ae\ucda4\nparser.add_argument('--edgetpu', help='Use Coral Edge TPU Accelerator to speed up detection',\n                    action='store_true',default=False)\n\nargs = parser.parse_args()\n\nMODEL_NAME = args.modeldir\nGRAPH_NAME = args.graph\nLABELMAP_NAME = args.labels\nmin_conf_threshold = float(args.threshold)\nresW, resH = args.resolution.split('x')\nimW, imH = int(resW), int(resH) # \ub77c\uc988\ubca0\ub9ac\ud30c\uc774 \uc81c\ub85c + \ud30c\uc774\uce74\uba54\ub77c\uc5d0\uc11c\ub294 224,224 \uac00 \uc544\uc8fc \ucb10\uc5d0\uc5d0\uc5d0\ub054 \ube60\ub985\ub2c8\ub2e4.\nuse_TPU = args.edgetpu\n\n# \ud150\uc11c\ud50c\ub85c\uc6b0 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uac00\uc838\uc635\ub2c8\ub2e4.\n# \ud150\uc11c\ud50c\ub85c\uc6b0 \ub77c\uc774\ube0c\ub7ec\ub9ac\uac00 \uc5c6\ub2e4\uba74, tflite_runtime \uc744 \uac00\uc838\uc635\ub2c8\ub2e4.\n# \ucf54\ub784 TPU\ub97c \uc0ac\uc6a9\ud55c\ub2e4\uba74, TPU \uc6a9 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uac00\uc838\uc635\ub2c8\ub2e4. (import the load_delegate library)\npkg = importlib.util.find_spec('tensorflow')\nif pkg is None:\n    from tflite_runtime.interpreter import Interpreter\n    if use_TPU:\n        from tflite_runtime.interpreter import load_delegate\nelse:\n    from tensorflow.lite.python.interpreter import Interpreter\n    if use_TPU:\n        from tensorflow.lite.python.interpreter import load_delegate\n\n# TPU\ub97c \uc0ac\uc6a9\ud55c\ub2e4\uba74 TPU \ubaa8\ub378\uc744 \uac00\uc838\uc635\ub2c8\ub2e4.\nif use_TPU:\n    # 'edgetpu.tflite'\uac00 TPU\ub97c \uc0ac\uc6a9\ud560 \ub54c\uc758 \uae30\ubcf8 \uacbd\ub85c\uc785\ub2c8\ub2e4.\n    if (GRAPH_NAME == 'model.tflite'):\n        GRAPH_NAME = 'edgetpu.tflite'       \n\n# \uc791\uc5c5 \uacbd\ub85c\uc640 \ud604\uc7ac \uacbd\ub85c\ub97c \uc77c\uce58\uc2dc\ud0b5\ub2c8\ub2e4.\nCWD_PATH = os.getcwd()\n\n# \ubaa8\ub378 \uacbd\ub85c\ub97c \uc124\uc815\ud569\ub2c8\ub2e4.\nPATH_TO_CKPT = os.path.join(CWD_PATH,MODEL_NAME,GRAPH_NAME)\n\n# \ub77c\ubca8 \uacbd\ub85c\ub97c \uc124\uc815\ud569\ub2c8\ub2e4.\nPATH_TO_LABELS = os.path.join(CWD_PATH,MODEL_NAME,LABELMAP_NAME)\n\n# \ub77c\ubca8\uc744 \uac00\uc838\uc635\ub2c8\ub2e4.\nwith open(PATH_TO_LABELS, 'r') as f:\n    labels = [line.strip() for line in f.readlines()]\n\n# \uccab\ubc88\uc9f8 \ub77c\ubca8\uc774 ??? \uc778 \uacbd\uc6b0\uac00 \uc788\uc5b4 \uadf8\ub7f4 \uacbd\uc6b0 \uc81c\uac70\ud569\ub2c8\ub2e4.\nif labels[0] == '???':\n    del(labels[0])\n\n# \ud150\uc11c\ud50c\ub85c\uc6b0 \ubaa8\ub378\uc744 \uac00\uc838\uc635\ub2c8\ub2e4. TPU\ub97c \uc4f8 \uacbd\uc6b0 TPU \ubaa8\ub378\ub85c \uac00\uc838\uc635\ub2c8\ub2e4.\nif use_TPU:\n    interpreter = Interpreter(model_path=PATH_TO_CKPT,\n                              experimental_delegates=[load_delegate('libedgetpu.so.1.0')])\n    print(PATH_TO_CKPT)\nelse:\n    interpreter = Interpreter(model_path=PATH_TO_CKPT)\n\ninterpreter.allocate_tensors()\n\n# \ub85c\ub4dc\ub41c \ubaa8\ub378\uc758 \uc815\ubcf4\ub97c \uac00\uc838\uc635\ub2c8\ub2e4.\ninput_details = interpreter.get_input_details()\noutput_details = interpreter.get_output_details()\nheight = input_details[0]['shape'][1]\nwidth = input_details[0]['shape'][2]\n#print(\"\uac00\ub85c\")\n#print(width)\n#print(\"\uc138\ub85c\")\n#print(height)\n# \uc785\ub825\uc774 \uc18c\uc218\uc778\uc9c0 \uc544\ub2cc\uc9c0 \ud310\ub2e8\ud569\ub2c8\ub2e4.\nfloating_model = (input_details[0]['dtype'] == np.float32)\n\ninput_mean = 127.5\ninput_std = 127.5\n\n# \uc5f0\uc0b0 \ud504\ub808\uc784\uc744 \uccb4\ud06c\ud558\uae30 \uc704\ud55c \ubcc0\uc218\ub97c \ud560\ub2f9\ud569\ub2c8\ub2e4.\nframe_rate_calc = 1\nfreq = cv2.getTickFrequency()\n\n# \uc0c1\ub2e8\uc5d0\uc11c \uc815\uc758\ud55c \ube44\ub514\uc624 \uc2a4\ud2b8\ub9bc\uc744 \uc2dc\uc791\ud569\ub2c8\ub2e4.\nvideostream = VideoStream(resolution=(imW,imH),framerate=30).start() \ntime.sleep(1)\n\n# \ud504\ub808\uc784\uc73c\ub85c \uc5f0\uc0b0\uc744 \uc2dc\uc791\ud569\ub2c8\ub2e4.\nwhile True:\n\n    # \uc5f0\uc0b0 \ud504\ub808\uc784\uc744 \uc704\ud55c \uc2dc\uac04 \uccb4\ud06c \ubcc0\uc218\ub97c \ud560\ub2f9\ud569\ub2c8\ub2e4.\n    t1 = cv2.getTickCount()\n\n    # \ube44\ub514\uc624\uc2a4\ud2b8\ub9bc\uc5d0\uc11c \ud504\ub808\uc784\uc744 \uc77d\uc5b4\uc635\ub2c8\ub2e4.\n    frame1 = videostream.read()\n\n    # \uc785\ub825\uc5d0 \ub123\uc744 \uc218 \uc788\ub3c4\ub85d \ud574\uc0c1\ub3c4\ub97c \ubcc0\uacbd\ud569\ub2c8\ub2e4.\n    frame = frame1.copy()\n    frame_rgb = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)\n    # \uc704\uc5d0\uc11c input\uc744 224,224\ub85c \uc124\uc815\ud588\ub2e4\uba74 \uc544\ub798 \uc904\uc740 \ub118\uc5b4\uac00\ub3c4 \ub429\ub2c8\ub2e4..\n    frame_resized = cv2.resize(frame_rgb, (width, height)) \n    input_data = np.expand_dims(frame_resized, axis=0)\n\n    # \uc785\ub825\uc774 \uc18c\uc218\ub77c\uba74 \uc18c\uc218\ub85c \ubc14\uafd4\uc90d\ub2c8\ub2e4.\n    if floating_model:\n        input_data = (np.float32(input_data) - input_mean) / input_std\n\n    # \ub85c\ub4dc\ub41c \ubaa8\ub378\uc5d0 \uc785\ub825\uc744 \ub123\uc5b4 \uacb0\uacfc\ub97c \uac00\uc838\uc635\ub2c8\ub2e4.\n    interpreter.set_tensor(input_details[0]['index'],input_data)\n    interpreter.invoke()\n    result=interpreter.get_tensor(output_details[0]['index'])[0]\n    print(labels[np.argmax(result)])\n    #print(result)\n    # \ucd08\ub2f9 \uc5f0\uc0b0 \ud504\ub808\uc784\uc744 \uacc4\uc0b0\ud569\ub2c8\ub2e4.\n    t2 = cv2.getTickCount()\n    time1 = (t2-t1)/freq\n    frame_rate_calc= 1/time1\n    #print(frame_rate_calc)\n",n,a],{type:"text/plain"});e.href=URL.createObjectURL(r),e.download="pibox.py",document.body.appendChild(e),e.click()}return r.a.createElement("div",{className:"connect-panel panel"},r.a.createElement("div",{className:"panel-title"},"\ube14\ub85d \ucf54\ub4dc"),r.a.createElement("div",null,r.a.createElement("p",null,"\ub77c\ubca8 : ",r.a.createElement("input",{type:"file",accept:".txt",onChange:function(e){var n;void 0!==(n=e.target.files[0])&&((t=new FileReader).onloadend=function(){var e=t.result,n=[];e.split("\n").forEach((function(e){n.push(e.substr(2)),console.log(e)})),""===n[n.length-1]&&n.pop(),s(n),m(0),E(0),A(new Array(n.length).fill("")),w(new Array(n.length).fill(""))},t.readAsText(n))}}))),r.a.createElement("div",{className:"label-output"},r.a.createElement("div",{className:"blocks-container"},0===l.length?null:r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("h4",null,"\ucc44\ub110 1 \ucd9c\ub825"),r.a.createElement("div",{className:"pics"},r.a.createElement("div",{className:"outputType",onClick:function(){m(0),A((function(e){return new Array(e.length).fill("")}))}},r.a.createElement("img",{className:"outputPic",src:T.a,alt:"no output"})),r.a.createElement("div",{className:"outputType",onClick:function(){m(1),A((function(e){return new Array(e.length).fill("0")}))}},r.a.createElement("img",{className:"outputPic",src:O.a,alt:"servomotor"})),r.a.createElement("div",{onClick:function(){m(2),A((function(e){return new Array(e.length).fill(["0","50","0.5"])}))},className:"outputType"},r.a.createElement("img",{className:"outputPic",src:y.a,alt:"motor"})),r.a.createElement("div",{onClick:function(){3!==h?(m(3),A((function(e){return new Array(e.length).fill({r:255,g:255,b:255,a:1})}))):alert("LED \ucd9c\ub825\uc740 1\uac1c\uc758 \ucc44\ub110\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.")},className:"outputType"},r.a.createElement("img",{className:"outputPic",src:P.a,alt:"led"})))),r.a.createElement("span",null,r.a.createElement("h4",null,"\ucc44\ub110 2 \ucd9c\ub825"),r.a.createElement("div",{className:"pics"},r.a.createElement("div",{className:"outputType",onClick:function(){E(0),w((function(e){return new Array(e.length).fill("")}))}},r.a.createElement("img",{className:"outputPic",src:T.a,alt:"no output"})),r.a.createElement("div",{className:"outputType",onClick:function(){E(1),w((function(e){return new Array(e.length).fill("0")}))}},r.a.createElement("img",{className:"outputPic",src:O.a,alt:"servomotor"})),r.a.createElement("div",{onClick:function(){E(2),w((function(e){return new Array(e.length).fill(["0","50","0.5"])}))},className:"outputType"},r.a.createElement("img",{className:"outputPic",src:y.a,alt:"motor"})),r.a.createElement("div",{onClick:function(){3!==p?(E(3),w((function(e){return new Array(e.length).fill({r:255,g:255,b:255,a:1})}))):alert("LED \ucd9c\ub825\uc740 1\uac1c\uc758 \ucc44\ub110\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.")},className:"outputType"},r.a.createElement("img",{className:"outputPic",src:P.a,alt:"led"})))))),r.a.createElement("div",null,l.map((function(e,t){return r.a.createElement("div",{className:"blocks",key:e},r.a.createElement("div",{className:"block"},e),r.a.createElement("div",{className:"arrow"}),r.a.createElement("div",null,function(e){return r.a.createElement("div",{className:"showOutputType",key:e},r.a.createElement("span",null,r.a.createElement("h4",null,"\ucc44\ub110 1"),1===p?r.a.createElement("div",{className:"servomotor"},r.a.createElement("p",null,"\uba87 \ub3c4 \uc6c0\uc9c1\uc77c\uae4c\uc694? ( 0 ~ 180 )"),r.a.createElement("input",{style:{height:30},onChange:function(t){var n=t.target.value;A((function(t){var a=Object(c.a)(t);return a[e]=parseInt(n),a}))},type:"number",value:_[e]})):2===p?r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("select",{onChange:function(t){var n=t.target.value;A((function(t){var a=Object(c.a)(t);return a[e]=[n,a[e][1],a[e][2]],a}))},defaultValue:_[e][0]},r.a.createElement("option",{value:"0"},"\uc815\ubc29\ud5a5"),r.a.createElement("option",{value:"1"},"\uc5ed\ubc29\ud5a5")),r.a.createElement("h4",null,"\uc18d\ub3c4 ( 0 ~ 100 ) "),r.a.createElement("input",{style:{height:30},onChange:function(t){var n=t.target.value;A((function(t){var a=Object(c.a)(t);return a[e]=[a[e][0],n,a[e][2]],a}))},type:"number",value:_[e][1]}),r.a.createElement("h4",null,"\uc2dc\uac04 ( 1 => 1\ucd08 ) "),r.a.createElement("input",{style:{height:30},onChange:function(t){var n=t.target.value;A((function(t){var a=Object(c.a)(t);return a[e]=[a[e][0],a[e][1],n],a}))},type:"number",value:_[e][2]})):3===p?r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(C.SliderPicker,{color:_[e],onChange:function(t){A((function(n){var a=Object(c.a)(n);return a[e]=t.rgb,a}))}})):r.a.createElement("div",{style:{display:"flex"}},"\ucd9c\ub825 \uc885\ub958\ub97c \uba3c\uc800 \uc120\ud0dd\ud558\uc138\uc694")),r.a.createElement("span",null,r.a.createElement("h4",null,"\ucc44\ub110 2"),1===h?r.a.createElement("div",{className:"servomotor"},"\uba87 \ub3c4 \uc6c0\uc9c1\uc77c\uae4c\uc694? ( 0 ~ 180 )",r.a.createElement("br",null),r.a.createElement("input",{style:{height:30},onChange:function(t){var n=t.target.value;w((function(t){var a=Object(c.a)(t);return a[e]=parseInt(n),a}))},type:"number",value:S[e]})):2===h?r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("select",{onChange:function(t){var n=t.target.value;w((function(t){var a=Object(c.a)(t);return a[e]=[n,a[e][1],a[e][2]],a}))},defaultValue:S[e][0]},r.a.createElement("option",{value:"0"},"\uc815\ubc29\ud5a5"),r.a.createElement("option",{value:"1"},"\uc5ed\ubc29\ud5a5")),r.a.createElement("h4",null,"\uc18d\ub3c4 ( 0 ~ 100 ) "),r.a.createElement("input",{style:{height:30},onChange:function(t){var n=t.target.value;w((function(t){var a=Object(c.a)(t);return a[e]=[a[e][0],n,a[e][2]],a}))},type:"number",value:S[e][1]}),r.a.createElement("h4",null,"\uc2dc\uac04 ( 1 => 1\ucd08 ) "),r.a.createElement("input",{style:{height:30},onChange:function(t){var n=t.target.value;w((function(t){var a=Object(c.a)(t);return a[e]=[a[e][0],a[e][1],n],a}))},type:"number",value:S[e][2]})):3===h?r.a.createElement("div",{style:{display:"flex",width:"100%"}},r.a.createElement(C.SliderPicker,{color:S[e],onChangeComplete:function(t){w((function(n){var a=Object(c.a)(n);return a[e]=t.rgb,a}))}})):r.a.createElement("div",{style:{display:"flex"}},"\ucd9c\ub825 \uc885\ub958\ub97c \uba3c\uc800 \uc120\ud0dd\ud558\uc138\uc694")))}(t)))}))))),r.a.createElement("div",null,r.a.createElement("h4",null,"\ube14\ub85d\uc774 \uc644\uc131\ub418\uc5c8\ub2e4\uba74"," ",r.a.createElement("span",{style:{color:"blue",cursor:"pointer"},onClick:function(){return x()}},"\ucf54\ub4dc \ub2e4\uc6b4\ub85c\ub4dc")," ")),r.a.createElement("div",null,r.a.createElement("h4",null,r.a.createElement("span",{style:{color:"blue",cursor:"pointer"},onClick:function(){return function(t){var n=document.createElement("a"),a="sshpass -praspberry scp -o StrictHostKeyChecking=no ./model.tflite pi@".concat(e.ipAddress,":/home/pi/tflite/model.tflite\nsshpass -praspberry scp -o StrictHostKeyChecking=no ./labels.txt pi@").concat(e.ipAddress,":/home/pi/tflite/labels.txt\nsshpass -praspberry scp -o StrictHostKeyChecking=no ./pibox.py pi@").concat(e.ipAddress,":/home/pi/tflite/pibox.py\n"),r=new Blob([a],{type:"text/plain"});n.href=URL.createObjectURL(r),n.download="WIN"===t?"upload.bat":"upload.sh",document.body.appendChild(n),n.click()}("WIN")}},"\ucf54\ub4dc \uc5c5\ub85c\ub4dc \ud504\ub85c\uadf8\ub7a8(\uc708\ub3c4\uc6b0)"),r.a.createElement("br",null),"\ucf54\ub4dc\uc640 \uc5c5\ub85c\ub4dc \ud504\ub85c\uadf8\ub7a8 \ud30c\uc77c\uc740 \ubaa8\ub378\ud30c\uc77c\uc744 \uc555\ucd95\ud47c \ud3f4\ub354\uc640 \uac19\uc740 \ud3f4\ub354\uc5d0 \ub123\uc5b4\uc8fc\uc138\uc694."),r.a.createElement("p",null,"\ucd08\uae30 \ube44\ubc00\ubc88\ud638 : raspberry",r.a.createElement("br",null))))}var w=n(2),x=n.n(w),M=function(e){function t(e){var n;for(var a in Object(p.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).connectDevice=function(){navigator.bluetooth.requestDevice({filters:[{services:[x.a.SERVICE_ID]}]}).then((function(e){return e.gatt.connect()})).then((function(e){return n.setState({serverId:e.device.id}),e.getPrimaryService(x.a.SERVICE_ID)})).then((function(e){return n.state.isIphone?(console.log("ios webBLE"),n.webBleConnect(e)):e.getCharacteristics()})).then(function(){var e=Object(o.a)(u.a.mark((function e(t){var a,r,i,l,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Connected!"),a=t,n.setState({isConnected:!0}),r=[{preset:!0,uuid:"",label:"Device ID",value:n.state.serverId},{preset:!0,uuid:x.a.DEVICE_MODEL,label:"Model",value:" "},{preset:!0,uuid:x.a.WIFI_NAME,label:"Wifi",value:"..."},{preset:!0,uuid:x.a.IP_ADDRESS,label:"IP Address",value:"..."}],e.next=6,n.subscribeCharacteristic(x.a.WIFI_NAME,r,a);case 6:return e.next=8,n.subscribeCharacteristic(x.a.IP_ADDRESS,r,a);case 8:return e.next=10,n.readInfoCharacteristic(x.a.DEVICE_MODEL,r,a);case 10:return e.next=12,n.subscribeCharacteristic(x.a.NOTIFY_MESSAGE,r,a);case 12:return e.next=14,n.subscribeCharacteristic(x.a.CUSTOM_COMMAND_NOTIFY,r,a);case 14:a.filter((function(e){return e.uuid.indexOf(x.a.CUSTOM_INFO_LABEL)>=0})).map((function(e){return r.push({uuid:e.uuid.replace(x.a.CUSTOM_INFO_LABEL,x.a.CUSTOM_INFO),uuid_label:e.uuid,label:"-",value:""})})),i=0;case 16:if(!(i<r.length)){e.next=26;break}if(!r[i].preset){e.next=19;break}return e.abrupt("continue",23);case 19:return e.next=21,n.readInfoCharacteristic(r[i].uuid_label,r,a);case 21:return e.next=23,n.subscribeCharacteristic(r[i].uuid,r,a);case 23:i++,e.next=16;break;case 26:l=[],a.filter((function(e){return e.uuid.indexOf(x.a.CUSTOM_COMMAND_LABEL)>=0})).map((function(e){return l.push({uuid:e.uuid,label:"..."})})),c=l,s=0;case 30:if(!(s<c.length)){e.next=36;break}return e.next=33,n.readCommandLabel(c[s].uuid,c,a);case 33:s++,e.next=30;break;case 36:n.setState({characteristicsList:a,infoList:r,commandList:c});case 37:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(console.log)},n.readCommandLabel=function(e,t,a){return new Promise((function(r){n.getCharacteristicInit(e,a).readValue().then((function(e){return e.buffer})).then(n.ab2str).then((function(a){var i=t;i.find((function(t){return t.uuid===e})).label=a,n.setState({commandList:i},r())}))}))},n.readInfoCharacteristic=function(e,t,a){return new Promise((function(r){n.getCharacteristicInit(e,a).readValue().then((function(e){return e.buffer})).then(n.ab2str).then((function(a){var i=t;i.find((function(t){return t.uuid===e}))&&(i.find((function(t){return t.uuid===e})).value=a),i.find((function(t){return t.uuid_label===e}))&&(i.find((function(t){return t.uuid_label===e})).label=a),i!==n.state.infoList?n.setState({infoList:i},r()):r()}))}))},n.subscribeCharacteristic=function(e,t,a){return new Promise(function(){var r=Object(o.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.getCharacteristicInit(e,a).addEventListener("characteristicvaluechanged",(function(a){if(a.target.uuid===x.a.NOTIFY_MESSAGE){var r=n.ab2str(a.target.value.buffer);E.notify.show(r,"custom",3e3,"teal")}else if(a.target.uuid===x.a.CUSTOM_COMMAND_NOTIFY){var i=n.ab2str(a.target.value.buffer);if(n.state.commandOutputShouldRefresh)n.setState({commandOutputShouldRefresh:!1,commandOutput:""},(function(){var e=n.state.commandOutput+i;e.endsWith("&#&")&&(e=e.replace("&#&",""),n.setState({commandOutputShouldRefresh:!0})),n.setState({commandOutput:e})}));else{var l=n.state.commandOutput+i;l.endsWith("&#&")&&(l=l.replace("&#&",""),n.setState({commandOutputShouldRefresh:!0})),n.setState({commandOutput:l})}}else{var c=n.ab2str(a.target.value.buffer),s=t;s.find((function(t){return t.uuid===e}))&&(s.find((function(t){return t.uuid===e})).value=c),s.find((function(t){return t.uuid_label===e}))&&(s.find((function(t){return t.uuid_label===e})).label=c),n.setState({infoList:s})}})),r.next=3,n.getCharacteristicInit(e,a).startNotifications();case 3:i();case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},n.webBleConnect=function(e){return new Promise(function(){var t=Object(o.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCharacteristic(x.a.PREFIX+x.a.CUSTOM_INFO_COUNT).then((function(e){return e.readValue()})).then((function(e){return e.buffer})).then(n.ab2str).then(parseInt).then((function(e){console.log("custom-info-count "+e),n.setState({customInfoCount:e})}));case 2:return t.next=4,e.getCharacteristic(x.a.PREFIX+x.a.CUSTOM_COMMAND_COUNT).then((function(e){return e.readValue()})).then((function(e){return e.buffer})).then(n.ab2str).then(parseInt).then((function(t){console.log("custom-command-count "+t),n.setState({customCommandCount:t},(function(){for(var t=[],r=0;r<n.state.customInfoCount;r++){var i=(r+1).toString(16);i="0".repeat(4-i.length)+i,t.push(x.a.PREFIX+x.a.CUSTOM_INFO+i),t.push(x.a.PREFIX+x.a.CUSTOM_INFO_LABEL+i)}for(var l=[],s=0;s<n.state.customCommandCount;s++){var u=(s+1).toString(16);u="0".repeat(4-u.length)+u,l.push(x.a.PREFIX+x.a.CUSTOM_COMMAND_LABEL+u)}a(Promise.all([e.getCharacteristic(x.a.SERVICE_NAME),e.getCharacteristic(x.a.DEVICE_MODEL),e.getCharacteristic(x.a.WIFI_NAME),e.getCharacteristic(x.a.IP_ADDRESS),e.getCharacteristic(x.a.NOTIFY_MESSAGE),e.getCharacteristic(x.a.INPUT_SEP),e.getCharacteristic(x.a.CUSTOM_COMMAND_INPUT),e.getCharacteristic(x.a.CUSTOM_COMMAND_NOTIFY)].concat(Object(c.a)(t.map((function(t){return e.getCharacteristic(t)}))),Object(c.a)(l.map((function(t){return e.getCharacteristic(t)}))))))}))}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},n.ab2str=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},n.getCharacteristic=function(e){return n.state.characteristicsList.find((function(t){return t.uuid===e}))},n.getCharacteristicInit=function(e,t){return t.find((function(t){return t.uuid===e}))},n.inputWifi=function(){n.setState({key:n.state.key.trim().replace(/\|/g,"*"),ssid:n.state.ssid.trim().replace(/\|/g,"*"),password:n.state.password.trim().replace(/\|/g,"*")},(function(){var e;if(""===n.state.ssid&&(e="SSID cannot be empty."),""===n.state.password&&(e="Password cannot be empty."),e)E.notify.show(e,"custom",3e3,"teal");else{n.setState({wifiLock:!0},(function(){return setTimeout((function(){n.setState({wifiLock:!1})}),4e3)}));var t=n.str2abs("".concat(n.state.key,"%&%").concat(n.state.ssid,"%&%").concat(n.state.password,"&#&"));n.sendSeparately(t,x.a.INPUT_SEP)}}))},n.sendCommand=function(e){var t=n.str2abs("".concat(n.state.key,"%&%").concat(e.slice(-4),"&#&"));n.sendSeparately(t,x.a.CUSTOM_COMMAND_INPUT)},n.sendSeparately=function(){var e=Object(o.a)(u.a.mark((function e(t,a){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=u.a.keys(t);case 1:if((e.t1=e.t0()).done){e.next=9;break}return r=e.t1.value,e.next=5,n.getCharacteristic(a).writeValue(t[r]);case 5:return e.next=7,n.wait(.4);case 7:e.next=1;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.wait=function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout((function(){e(!0)}),1e3*t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.str2abs=function(e){for(var t="",n=0;n<e.length;n++)""===t?t=e.charCodeAt(n).toString(16):t+=","+e.charCodeAt(n).toString(16);for(var a=t.split(","),r=[];a.length>0;){var i=a.splice(0,20).join(",");r.push(new Uint8Array(i.match(/[\da-f]{2}/gi).map((function(e){return parseInt(e,16)}))).buffer)}return r},n.state={supportBluetooth:Boolean(window.navigator.bluetooth),isConnected:!1,serverId:"",ssid:"",password:"",key:"pibox",wifiLock:!1,characteristicsList:[],infoList:[],commandList:[],commandOutput:"",commandOutputShouldRefresh:!1,loading:null,charLength:-1,customInfoCount:0,customCommandCount:0,isAndroid:navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Adr")>-1,isIphone:navigator.userAgent.indexOf("iPhone")>-1||navigator.userAgent.indexOf("iphone")>-1},x.a)x.a[a]=x.a[a].toLowerCase();return n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"BluetoothConnect"},r.a.createElement("div",{id:"app"},r.a.createElement(v.a,null),r.a.createElement("div",{className:"panel-container"},this.state.supportBluetooth?null:r.a.createElement("div",{className:"connect-panel panel"},r.a.createElement("div",{className:"panel-title"},"Cannot find web bluetooth."),r.a.createElement("p",null,"Please make sure your device and browser support web bluetooth. Please visit"," ",r.a.createElement("a",{href:"https://github.com/WebBluetoothCG/web-bluetooth/blob/master/implementation-status.md",target:"_brank"},"Here")," ","to check web-bluetooth compatibility.")),!this.state.isConnected&&this.state.supportBluetooth?r.a.createElement("div",{className:"connect-panel panel"},r.a.createElement("div",{className:"panel-title"},"PIBOX. \ub77c\uc988\ubca0\uc774\ud30c\uc774\ub97c \ube14\ub8e8\ud22c\uc2a4\ub85c \ucc3e\uc544 \uc81c\uc5b4\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),r.a.createElement("div",null,r.a.createElement("button",{className:"findBluetooth",onClick:this.connectDevice},"\ube14\ub8e8\ud22c\uc2a4\ub85c \ucc3e\uae30"))):null,this.state.isConnected?r.a.createElement("div",{className:"info-panel panel"},r.a.createElement("div",{className:"panel-title"},"\uae30\uae30 \uc815\ubcf4"),this.state.infoList.map((function(e){return r.a.createElement("div",{key:e.uuid,className:"info-group"},r.a.createElement("div",{className:"label"},e.label),r.a.createElement("div",{className:"value"},e.value))}))):null,this.state.isConnected?r.a.createElement("div",{className:"wifi-panel panel"},r.a.createElement("div",{className:"panel-title"},"\ub77c\uc988\ubca0\ub9ac\ud30c\uc774 \uc640\uc774\ud30c\uc774 \uc124\uc815"),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"\uc640\uc774\ud30c\uc774 \uc774\ub984(SSID)",value:this.state.ssid,onChange:function(t){return e.setState({ssid:t.target.value})}})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"\uc640\uc774\ud30c\uc774 \ube44\ubc00\ubc88\ud638",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},type:"password"})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Key (Default: pibox)",value:this.state.key,onChange:function(t){return e.setState({key:t.target.value})}})),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.inputWifi,disabled:this.state.wifiLock},"\uc640\uc774\ud30c\uc774 \uc124\uc815"))):null,this.state.isConnected?r.a.createElement("div",{className:"command-panel panel"},r.a.createElement("div",{className:"panel-title"},"\ucee4\uc2a4\ud140 \uba85\ub839\uc5b4"),this.state.commandList.length>0?r.a.createElement("div",null,r.a.createElement("div",null,this.state.commandList.map((function(t){return r.a.createElement("div",{key:t.uuid,className:"button-wrap"},r.a.createElement("button",{size:"small",onClick:function(){return e.sendCommand(t.uuid)}},t.label))}))),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Key (Default: pibox)",value:this.state.key,onChange:function(t){return e.setState({key:t.target.value})}})),r.a.createElement("div",null,r.a.createElement("input",{type:"textarea",placeholder:"Output",value:this.state.commandOutput,readOnly:!0,rows:"10"}))):r.a.createElement("p",null,"\ucee4\uc2a4\ud140 \uba85\ub839\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.")):null),this.state.isConnected?r.a.createElement("div",{className:"panel-container"},r.a.createElement(g,{ipAddress:void 0===this.state.infoList.find((function(e){return"IP Address"===e.label}))?"":this.state.infoList.find((function(e){return"IP Address"===e.label})).value})):null,this.state.isConnected?r.a.createElement("div",{className:"panel-container"},r.a.createElement(S,{ipAddress:void 0===this.state.infoList.find((function(e){return"IP Address"===e.label}))?"":this.state.infoList.find((function(e){return"IP Address"===e.label})).value})):null,r.a.createElement("div",{className:"copyright"},"PiBox . Open source under GPL-3.0 license.")))}}]),t}(r.a.Component);var D=function(){return r.a.createElement(M,null)};l.a.render(r.a.createElement(D,null),document.getElementById("root")||document.createElement("div"))},57:function(e,t,n){e.exports=n.p+"static/media/servomotor.ba097c0f.png"},58:function(e,t,n){e.exports=n.p+"static/media/motor.d4643de8.png"},59:function(e,t,n){e.exports=n.p+"static/media/led.cd049886.png"},60:function(e,t,n){e.exports=n.p+"static/media/none.bd980005.png"},61:function(e,t,n){}},[[101,1,2]]]);
//# sourceMappingURL=main.810ff15b.chunk.js.map